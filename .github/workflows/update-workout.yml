name: Update workout.xlsx via API

on:
  workflow_dispatch:
    inputs:
      file:
        description: Base64-encoded XLSX content
        required: true

jobs:
  update:
    runs-on: ubuntu-latest
    steps:
      - name: Check out repo
        uses: actions/checkout@v4

      - name: Decode uploaded Excel
        run: |
          echo "${{ github.event.inputs.file }}" | base64 --decode > workout.xlsx

      - name: Commit sheet
        uses: stefanzweifel/git-auto-commit-action@v4
        with:
          token: ${{ secrets.PAT_TOKEN }}
          commit_message: "Auto-update workout.xlsx"
          file_pattern: workout.xlsx        # âœ… exact path
          add_options: "-f"                 # force-add even if large
